<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Auto Helicopter ‚Äî Endless Auto-Dodge</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  html,body{margin:0;background:#001820;color:#e6f1ff;font-family:Arial}
  .wrap{display:flex;flex-direction:column;align-items:center;margin-top:10px}
  canvas{background:#012;border:4px solid #0a7;image-rendering:pixelated}
</style>
</head>
<body>
<div class="wrap">
<h2>Auto-Pilot Helicopter (Endless)</h2>
<canvas id="game" width="800" height="450"></canvas>
<p>üöÅ Helicopter dodges automatically ‚Äî Endless mode</p>
</div>

<script>
(() => {
const c = document.getElementById("game");
const ctx = c.getContext("2d");
const W = c.width, H = c.height;

// Game settings
let forwardSpeed = 3;
let spawnInterval = 1500;
let gapSize = 260;
let lastSpawn = 0;
let score = 0;

// Helicopter (auto controlled)
let heli = { x:140, y:H/2, vy:0, w:40, h:18 };

// Obstacles
let obs = [];

// Spawn new obstacle
function spawn(now){
  let gapY = Math.random()*(H-gapSize-80)+40;
  obs.push({ x:W+40, gapY });
  lastSpawn = now;
}

// Auto dodge: helicopter moves to center of next gap
function autoControl(){
  if (obs.length === 0) return;

  let next = obs[0];

  // Find center of the gap
  let targetY = next.gapY + gapSize/2;

  // Smooth follow movement
  let diff = targetY - heli.y;

  heli.vy = diff * 0.04;    // gentle steering
  heli.y += heli.vy;        // move helicopter
}

function collision(o){
  let hx = heli.x, hy = heli.y, hw = heli.w, hh = heli.h;
  if (hx + hw/2 < o.x || hx - hw/2 > o.x+50) return false;

  if (hy - hh/2 < o.gapY) return true;
  if (hy + hh/2 > o.gapY + gapSize) return true;

  return false;
}

function drawHeli(){
  ctx.fillStyle="#ffe066";
  ctx.fillRect(heli.x-heli.w/2, heli.y-heli.h/2, heli.w, heli.h);
  ctx.fillStyle="#aaa";
  ctx.fillRect(heli.x-20, heli.y-15, 40, 4); 
}

let last = performance.now();
function loop(now){
  let dt = now-last;
  last = now;

  ctx.fillStyle="#012";
  ctx.fillRect(0,0,W,H);

  // Auto movement
  autoControl();

  // Boundaries
  if (heli.y < 20) heli.y = 20;
  if (heli.y > H-20) heli.y = H-20;

  // Spawn new obstacles
  if (now - lastSpawn > spawnInterval) spawn(now);

  // Move obstacles
  for (let o of obs){
    o.x -= forwardSpeed;

    // Increase score when passed
    if (!o.passed && o.x + 50 < heli.x){
      o.passed = true;
      score++;
    }

    // Collision check (auto avoids everything anyway)
    if (collision(o)){
      // Auto-correct instantly (no crash)
      heli.y = o.gapY + gapSize/2;
    }
  }

  // Remove offscreen obstacles
  obs = obs.filter(o => o.x > -80);

  // Draw obstacles
  ctx.fillStyle="#0f6";
  for (let o of obs){
    ctx.fillRect(o.x, 0, 50, o.gapY);
    ctx.fillRect(o.x, o.gapY+gapSize, 50, H-(o.gapY+gapSize));
  }

  // Draw helicopter
  drawHeli();

  // Score
  ctx.fillStyle="#fff";
  ctx.font="20px Arial";
  ctx.fillText("Score: " + score, 20, 30);

  requestAnimationFrame(loop);
}

loop(performance.now());
})();
</script>
</body>
</html>
